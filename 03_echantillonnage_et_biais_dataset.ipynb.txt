{
 "cells": [
  {
   "cell_type": "markdown",
   "id": "12221960",
   "metadata": {},
   "source": [
    "\n",
    "# PARTIE 3 ‚Äî √âchantillonnage & Biais  \n",
    "\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "556b1258",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>client_id</th>\n",
       "      <th>sexe</th>\n",
       "      <th>√¢ge</th>\n",
       "      <th>revenu_mensuel</th>\n",
       "      <th>segment_age</th>\n",
       "      <th>revenu_cat</th>\n",
       "      <th>produit</th>\n",
       "      <th>canal_achat</th>\n",
       "      <th>montant_panier</th>\n",
       "      <th>panier_frequent</th>\n",
       "      <th>note_satisfaction</th>\n",
       "      <th>retour_produit</th>\n",
       "      <th>date_achat</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>1</td>\n",
       "      <td>Homme</td>\n",
       "      <td>50</td>\n",
       "      <td>3893.70</td>\n",
       "      <td>Mature</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Sport</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>83.27</td>\n",
       "      <td>Non</td>\n",
       "      <td>2</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-05-28</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2</td>\n",
       "      <td>Femme</td>\n",
       "      <td>39</td>\n",
       "      <td>2885.15</td>\n",
       "      <td>Adulte</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>√âlectronique</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>47.18</td>\n",
       "      <td>Oui</td>\n",
       "      <td>3</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-01-13</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>3</td>\n",
       "      <td>Homme</td>\n",
       "      <td>44</td>\n",
       "      <td>2369.53</td>\n",
       "      <td>Mature</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Sport</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>72.28</td>\n",
       "      <td>Oui</td>\n",
       "      <td>4</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-03-13</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>4</td>\n",
       "      <td>Homme</td>\n",
       "      <td>38</td>\n",
       "      <td>3197.92</td>\n",
       "      <td>Adulte</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>√âlectronique</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>54.59</td>\n",
       "      <td>Non</td>\n",
       "      <td>3</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-05-07</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>5</td>\n",
       "      <td>Homme</td>\n",
       "      <td>20</td>\n",
       "      <td>3774.66</td>\n",
       "      <td>Jeune</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Sport</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>75.30</td>\n",
       "      <td>Non</td>\n",
       "      <td>4</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-07-04</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   client_id   sexe  √¢ge  revenu_mensuel segment_age revenu_cat       produit  \\\n",
       "0          1  Homme   50         3893.70      Mature      Moyen         Sport   \n",
       "1          2  Femme   39         2885.15      Adulte      Moyen  √âlectronique   \n",
       "2          3  Homme   44         2369.53      Mature      Moyen         Sport   \n",
       "3          4  Homme   38         3197.92      Adulte      Moyen  √âlectronique   \n",
       "4          5  Homme   20         3774.66       Jeune      Moyen         Sport   \n",
       "\n",
       "  canal_achat  montant_panier panier_frequent  note_satisfaction  \\\n",
       "0      Mobile           83.27             Non                  2   \n",
       "1      Mobile           47.18             Oui                  3   \n",
       "2      Mobile           72.28             Oui                  4   \n",
       "3      Mobile           54.59             Non                  3   \n",
       "4      Mobile           75.30             Non                  4   \n",
       "\n",
       "  retour_produit  date_achat  \n",
       "0            Non  2023-05-28  \n",
       "1            Non  2023-01-13  \n",
       "2            Non  2023-03-13  \n",
       "3            Non  2023-05-07  \n",
       "4            Non  2023-07-04  "
      ]
     },
     "execution_count": 2,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "\n",
    "import pandas as pd\n",
    "import numpy as np\n",
    "\n",
    "df = pd.read_csv(\"ecommerce_dataset.csv\")\n",
    "df.head()\n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "dbd4a7c2",
   "metadata": {},
   "source": [
    "\n",
    "##  Types de sampling (√âchantillonnage)\n",
    "\n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "59846f58",
   "metadata": {},
   "source": [
    "\n",
    "### üîπ 1. √âchantillonnage al√©atoire simple  \n",
    "Chaque ligne de votre dataset a la **m√™me probabilit√©** d'√™tre s√©lectionn√©e.\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "8bb9586b",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>client_id</th>\n",
       "      <th>sexe</th>\n",
       "      <th>√¢ge</th>\n",
       "      <th>revenu_mensuel</th>\n",
       "      <th>segment_age</th>\n",
       "      <th>revenu_cat</th>\n",
       "      <th>produit</th>\n",
       "      <th>canal_achat</th>\n",
       "      <th>montant_panier</th>\n",
       "      <th>panier_frequent</th>\n",
       "      <th>note_satisfaction</th>\n",
       "      <th>retour_produit</th>\n",
       "      <th>date_achat</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>11499</th>\n",
       "      <td>11500</td>\n",
       "      <td>Femme</td>\n",
       "      <td>38</td>\n",
       "      <td>1501.79</td>\n",
       "      <td>Adulte</td>\n",
       "      <td>Bas</td>\n",
       "      <td>Mode</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>16.02</td>\n",
       "      <td>Oui</td>\n",
       "      <td>4</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-07-26</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6475</th>\n",
       "      <td>6476</td>\n",
       "      <td>Femme</td>\n",
       "      <td>36</td>\n",
       "      <td>2585.90</td>\n",
       "      <td>Adulte</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Maison</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>124.32</td>\n",
       "      <td>Non</td>\n",
       "      <td>3</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-07-11</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13167</th>\n",
       "      <td>13168</td>\n",
       "      <td>Femme</td>\n",
       "      <td>42</td>\n",
       "      <td>2153.52</td>\n",
       "      <td>Mature</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Beaut√©</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>26.48</td>\n",
       "      <td>Non</td>\n",
       "      <td>3</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-04-08</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>862</th>\n",
       "      <td>863</td>\n",
       "      <td>Femme</td>\n",
       "      <td>38</td>\n",
       "      <td>2975.21</td>\n",
       "      <td>Adulte</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Mode</td>\n",
       "      <td>App</td>\n",
       "      <td>91.89</td>\n",
       "      <td>Non</td>\n",
       "      <td>3</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-01-29</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5970</th>\n",
       "      <td>5971</td>\n",
       "      <td>Homme</td>\n",
       "      <td>34</td>\n",
       "      <td>3150.76</td>\n",
       "      <td>Adulte</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Maison</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>79.58</td>\n",
       "      <td>Oui</td>\n",
       "      <td>5</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-05-26</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6706</th>\n",
       "      <td>6707</td>\n",
       "      <td>Femme</td>\n",
       "      <td>36</td>\n",
       "      <td>2635.95</td>\n",
       "      <td>Adulte</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Maison</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>29.30</td>\n",
       "      <td>Non</td>\n",
       "      <td>2</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-07-16</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3017</th>\n",
       "      <td>3018</td>\n",
       "      <td>Homme</td>\n",
       "      <td>60</td>\n",
       "      <td>2190.17</td>\n",
       "      <td>Mature</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Mode</td>\n",
       "      <td>App</td>\n",
       "      <td>132.24</td>\n",
       "      <td>Oui</td>\n",
       "      <td>3</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-11-26</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3781</th>\n",
       "      <td>3782</td>\n",
       "      <td>Homme</td>\n",
       "      <td>42</td>\n",
       "      <td>2025.69</td>\n",
       "      <td>Mature</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Maison</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>93.19</td>\n",
       "      <td>Non</td>\n",
       "      <td>2</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-03-16</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3898</th>\n",
       "      <td>3899</td>\n",
       "      <td>Homme</td>\n",
       "      <td>27</td>\n",
       "      <td>1850.26</td>\n",
       "      <td>Adulte</td>\n",
       "      <td>Bas</td>\n",
       "      <td>√âlectronique</td>\n",
       "      <td>Desktop</td>\n",
       "      <td>56.82</td>\n",
       "      <td>Oui</td>\n",
       "      <td>4</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-03-22</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2250</th>\n",
       "      <td>2251</td>\n",
       "      <td>Homme</td>\n",
       "      <td>32</td>\n",
       "      <td>4337.03</td>\n",
       "      <td>Adulte</td>\n",
       "      <td>√âlev√©</td>\n",
       "      <td>√âlectronique</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>132.59</td>\n",
       "      <td>Non</td>\n",
       "      <td>2</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-10-25</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>542</th>\n",
       "      <td>543</td>\n",
       "      <td>Homme</td>\n",
       "      <td>36</td>\n",
       "      <td>2328.87</td>\n",
       "      <td>Adulte</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Sport</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>51.55</td>\n",
       "      <td>Oui</td>\n",
       "      <td>4</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-01-24</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4351</th>\n",
       "      <td>4352</td>\n",
       "      <td>Homme</td>\n",
       "      <td>34</td>\n",
       "      <td>3931.19</td>\n",
       "      <td>Adulte</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>√âlectronique</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>156.94</td>\n",
       "      <td>Non</td>\n",
       "      <td>2</td>\n",
       "      <td>Oui</td>\n",
       "      <td>2023-10-18</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12807</th>\n",
       "      <td>12808</td>\n",
       "      <td>Femme</td>\n",
       "      <td>22</td>\n",
       "      <td>2215.27</td>\n",
       "      <td>Jeune</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Mode</td>\n",
       "      <td>Email</td>\n",
       "      <td>301.84</td>\n",
       "      <td>Oui</td>\n",
       "      <td>4</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-08-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6631</th>\n",
       "      <td>6632</td>\n",
       "      <td>Femme</td>\n",
       "      <td>22</td>\n",
       "      <td>1970.45</td>\n",
       "      <td>Jeune</td>\n",
       "      <td>Bas</td>\n",
       "      <td>Beaut√©</td>\n",
       "      <td>Desktop</td>\n",
       "      <td>146.06</td>\n",
       "      <td>Non</td>\n",
       "      <td>4</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-07-22</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6705</th>\n",
       "      <td>6706</td>\n",
       "      <td>Femme</td>\n",
       "      <td>42</td>\n",
       "      <td>4341.30</td>\n",
       "      <td>Mature</td>\n",
       "      <td>√âlev√©</td>\n",
       "      <td>Maison</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>50.95</td>\n",
       "      <td>Oui</td>\n",
       "      <td>3</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-10-06</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6978</th>\n",
       "      <td>6979</td>\n",
       "      <td>Femme</td>\n",
       "      <td>25</td>\n",
       "      <td>2680.43</td>\n",
       "      <td>Jeune</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Beaut√©</td>\n",
       "      <td>Email</td>\n",
       "      <td>37.92</td>\n",
       "      <td>Non</td>\n",
       "      <td>3</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-09-17</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7399</th>\n",
       "      <td>7400</td>\n",
       "      <td>Homme</td>\n",
       "      <td>29</td>\n",
       "      <td>4598.42</td>\n",
       "      <td>Adulte</td>\n",
       "      <td>√âlev√©</td>\n",
       "      <td>√âlectronique</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>135.68</td>\n",
       "      <td>Oui</td>\n",
       "      <td>3</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-06-18</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11119</th>\n",
       "      <td>11120</td>\n",
       "      <td>Femme</td>\n",
       "      <td>44</td>\n",
       "      <td>2378.91</td>\n",
       "      <td>Mature</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Maison</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>165.13</td>\n",
       "      <td>Non</td>\n",
       "      <td>2</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-05-10</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12665</th>\n",
       "      <td>12666</td>\n",
       "      <td>Femme</td>\n",
       "      <td>26</td>\n",
       "      <td>3014.93</td>\n",
       "      <td>Adulte</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Beaut√©</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>35.45</td>\n",
       "      <td>Non</td>\n",
       "      <td>4</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-11-06</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5304</th>\n",
       "      <td>5305</td>\n",
       "      <td>Femme</td>\n",
       "      <td>46</td>\n",
       "      <td>2968.42</td>\n",
       "      <td>Mature</td>\n",
       "      <td>Moyen</td>\n",
       "      <td>Beaut√©</td>\n",
       "      <td>Mobile</td>\n",
       "      <td>101.86</td>\n",
       "      <td>Non</td>\n",
       "      <td>3</td>\n",
       "      <td>Non</td>\n",
       "      <td>2023-03-15</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "       client_id   sexe  √¢ge  revenu_mensuel segment_age revenu_cat  \\\n",
       "11499      11500  Femme   38         1501.79      Adulte        Bas   \n",
       "6475        6476  Femme   36         2585.90      Adulte      Moyen   \n",
       "13167      13168  Femme   42         2153.52      Mature      Moyen   \n",
       "862          863  Femme   38         2975.21      Adulte      Moyen   \n",
       "5970        5971  Homme   34         3150.76      Adulte      Moyen   \n",
       "6706        6707  Femme   36         2635.95      Adulte      Moyen   \n",
       "3017        3018  Homme   60         2190.17      Mature      Moyen   \n",
       "3781        3782  Homme   42         2025.69      Mature      Moyen   \n",
       "3898        3899  Homme   27         1850.26      Adulte        Bas   \n",
       "2250        2251  Homme   32         4337.03      Adulte      √âlev√©   \n",
       "542          543  Homme   36         2328.87      Adulte      Moyen   \n",
       "4351        4352  Homme   34         3931.19      Adulte      Moyen   \n",
       "12807      12808  Femme   22         2215.27       Jeune      Moyen   \n",
       "6631        6632  Femme   22         1970.45       Jeune        Bas   \n",
       "6705        6706  Femme   42         4341.30      Mature      √âlev√©   \n",
       "6978        6979  Femme   25         2680.43       Jeune      Moyen   \n",
       "7399        7400  Homme   29         4598.42      Adulte      √âlev√©   \n",
       "11119      11120  Femme   44         2378.91      Mature      Moyen   \n",
       "12665      12666  Femme   26         3014.93      Adulte      Moyen   \n",
       "5304        5305  Femme   46         2968.42      Mature      Moyen   \n",
       "\n",
       "            produit canal_achat  montant_panier panier_frequent  \\\n",
       "11499          Mode      Mobile           16.02             Oui   \n",
       "6475         Maison      Mobile          124.32             Non   \n",
       "13167        Beaut√©      Mobile           26.48             Non   \n",
       "862            Mode         App           91.89             Non   \n",
       "5970         Maison      Mobile           79.58             Oui   \n",
       "6706         Maison      Mobile           29.30             Non   \n",
       "3017           Mode         App          132.24             Oui   \n",
       "3781         Maison      Mobile           93.19             Non   \n",
       "3898   √âlectronique     Desktop           56.82             Oui   \n",
       "2250   √âlectronique      Mobile          132.59             Non   \n",
       "542           Sport      Mobile           51.55             Oui   \n",
       "4351   √âlectronique      Mobile          156.94             Non   \n",
       "12807          Mode       Email          301.84             Oui   \n",
       "6631         Beaut√©     Desktop          146.06             Non   \n",
       "6705         Maison      Mobile           50.95             Oui   \n",
       "6978         Beaut√©       Email           37.92             Non   \n",
       "7399   √âlectronique      Mobile          135.68             Oui   \n",
       "11119        Maison      Mobile          165.13             Non   \n",
       "12665        Beaut√©      Mobile           35.45             Non   \n",
       "5304         Beaut√©      Mobile          101.86             Non   \n",
       "\n",
       "       note_satisfaction retour_produit  date_achat  \n",
       "11499                  4            Non  2023-07-26  \n",
       "6475                   3            Non  2023-07-11  \n",
       "13167                  3            Non  2023-04-08  \n",
       "862                    3            Non  2023-01-29  \n",
       "5970                   5            Non  2023-05-26  \n",
       "6706                   2            Non  2023-07-16  \n",
       "3017                   3            Non  2023-11-26  \n",
       "3781                   2            Non  2023-03-16  \n",
       "3898                   4            Non  2023-03-22  \n",
       "2250                   2            Non  2023-10-25  \n",
       "542                    4            Non  2023-01-24  \n",
       "4351                   2            Oui  2023-10-18  \n",
       "12807                  4            Non  2023-08-30  \n",
       "6631                   4            Non  2023-07-22  \n",
       "6705                   3            Non  2023-10-06  \n",
       "6978                   3            Non  2023-09-17  \n",
       "7399                   3            Non  2023-06-18  \n",
       "11119                  2            Non  2023-05-10  \n",
       "12665                  4            Non  2023-11-06  \n",
       "5304                   3            Non  2023-03-15  "
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "\n",
    "sample_simple = df.sample(n=20, random_state=42)\n",
    "sample_simple\n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "6defb9bf",
   "metadata": {},
   "source": [
    "\n",
    "### üîπ 2. √âchantillonnage stratifi√©  \n",
    "On √©chantillonne proportionnellement selon une variable cat√©gorielle,  \n",
    "par exemple : **segment_age** ou **revenu_cat**.\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "d8ac4b54",
   "metadata": {},
   "outputs": [],
   "source": [
    "\n",
    "# Exemple : stratification par segment_age\n",
    "if \"segment_age\" in df.columns:\n",
    "    sample_stratifie = df.groupby(\"segment_age\").sample(n=5, random_state=42)\n",
    "else:\n",
    "    # fallback si la colonne n'existe pas\n",
    "    sample_stratifie = df.groupby(df.columns[0]).sample(n=5, random_state=42)\n",
    "\n",
    "sample_stratifie\n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "e3806e5d",
   "metadata": {},
   "source": [
    "\n",
    "### üîπ 3. √âchantillonnage syst√©matique  \n",
    "On s√©lectionne **1 ligne tous les k enregistrements**.\n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "1ac9cb1e",
   "metadata": {},
   "source": [
    "\n",
    "### üîπ 4. √âchantillonnage par grappes (clusters)  \n",
    "On choisit des groupes ENTIERES, par exemple **produit**, **canal_achat**, etc.\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "f6601e77",
   "metadata": {},
   "outputs": [],
   "source": [
    "\n",
    "# Exemple : cluster bas√© sur la variable 'produit' si elle existe\n",
    "col = \"produit\" if \"produit\" in df.columns else df.columns[0]\n",
    "\n",
    "clusters = df[col].drop_duplicates().sample(2, random_state=42)\n",
    "sample_clusters = df[df[col].isin(clusters)]\n",
    "sample_clusters.head()\n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "be8cd562",
   "metadata": {},
   "source": [
    "\n",
    "---\n",
    "\n",
    "# ‚≠ê 2.2 ‚Äî Types de biais  \n",
    "Ces biais peuvent fausser vos analyses et vos mod√®les ML,  \n",
    "surtout si les donn√©es e-commerce ne sont pas repr√©sentatives.\n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "ac58d28b",
   "metadata": {},
   "source": [
    "\n",
    "### üîπ 1. Biais de s√©lection  \n",
    "Certains clients ont plus de chances d'appara√Ætre dans les donn√©es.\n",
    "\n",
    "**Exemples e-commerce :**\n",
    "- seules les personnes ayant finalis√© un achat apparaissent  \n",
    "- les clients ayant un panier √©lev√© remplissent mieux les formulaires  \n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "b527af9b",
   "metadata": {},
   "source": [
    "\n",
    "### üîπ 2. Biais du survivant  \n",
    "On n‚Äôobserve que ceux qui restent.\n",
    "\n",
    "**Exemples e-commerce :**\n",
    "- analyser uniquement les clients fid√®les ‚Üí les churners disparaissent  \n",
    "- regarder seulement les produits √† succ√®s ‚Üí les flops invisibles  \n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "f617f609",
   "metadata": {},
   "source": [
    "\n",
    "### üîπ 3. Biais d‚Äôauto-s√©lection  \n",
    "Les individus se s√©lectionnent eux-m√™mes.\n",
    "\n",
    "**Exemples :**\n",
    "- seuls les clients motiv√©s r√©pondent aux questionnaires de satisfaction  \n",
    "- les avis produits viennent surtout des extr√™mes (tr√®s satisfaits / tr√®s d√©√ßus)  \n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "8b90337a",
   "metadata": {},
   "source": [
    "\n",
    "---\n",
    "\n",
    "# üéØ Impact direct sur les mod√®les ML\n",
    "\n",
    "Des biais dans les donn√©es e-commerce entra√Ænent :\n",
    "\n",
    "- mod√®les **moins g√©n√©ralisables**\n",
    "- recommandations fauss√©es\n",
    "- mauvaise estimation du churn\n",
    "- segmentation client erron√©e\n",
    "\n",
    "**R√®gle d‚Äôor :**  \n",
    "> Un mod√®le n'est jamais meilleur que la repr√©sentativit√© de ses donn√©es.\n"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "base",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.13.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
